package com.aem.play.core.models;

import java.util.List;

import com.adobe.cq.export.json.ComponentExporter;

/**
 * Sling model interface for Share Social component.
 * Exposes page metadata and author-configured social networks.
 */
public interface ShareSocialModel extends ComponentExporter {

    /**
     * Returns the configured social networks.
     *
     * @return list of social network keys
     */
    List<String> getSocialNetworks();

    /**
     * Returns the current page URL.
     *
     * @return page URL
     */
    String getPageUrl();

    /**
     * Returns the current page title.
     *
     * @return page title
     */
    String getPageTitle();

    /**
     * Returns the current page description.
     *
     * @return page description
     */
    String getPageDescription();

    /**
     * Returns the share image URL if available.
     *
     * @return share image URL or empty string
     */
    String getShareImage();
}


------------------------

package com.aem.play.core.models.impl;

import java.util.Collections;
import java.util.List;

import javax.annotation.PostConstruct;

import com.aem.play.core.models.ShareSocialModel;
import com.adobe.cq.export.json.ComponentExporter;
import com.adobe.cq.export.json.ExporterConstants;
import com.adobe.cq.wcm.core.components.commons.link.LinkManager;
import com.day.cq.wcm.api.Page;

import org.apache.commons.lang3.StringUtils;
import org.apache.sling.api.SlingHttpServletRequest;
import org.apache.sling.models.annotations.DefaultInjectionStrategy;
import org.apache.sling.models.annotations.Exporter;
import org.apache.sling.models.annotations.Model;
import org.apache.sling.models.annotations.injectorspecific.ScriptVariable;
import org.apache.sling.models.annotations.injectorspecific.Self;
import org.apache.sling.models.annotations.injectorspecific.ValueMapValue;

/**
 * Implementation of Share Social component.
 * Provides page metadata and author-selected social networks to HTL.
 */
@Model(
        adaptables = SlingHttpServletRequest.class,
        adapters = { ShareSocialModel.class, ComponentExporter.class },
        resourceType = ShareSocialModelImpl.RESOURCE_TYPE,
        defaultInjectionStrategy = DefaultInjectionStrategy.OPTIONAL
)
@Exporter(
        name = ExporterConstants.SLING_MODEL_EXPORTER_NAME,
        extensions = ExporterConstants.SLING_MODEL_EXTENSION
)
public class ShareSocialModelImpl implements ShareSocialModel {

    /**
     * Component resource type.
     */
    public static final String RESOURCE_TYPE = "aem-play/components/share-social";

    /**
     * Current page.
     */
    @ScriptVariable
    private Page currentPage;

    /**
     * Link manager used to build page URL.
     */
    @Self
    private LinkManager linkManager;

    /**
     * Author-selected social networks.
     */
    @ValueMapValue
    private List<String> socialNetworks;

    private String pageUrl;
    private String pageTitle;
    private String pageDescription;
    private String shareImage;

    /**
     * Initializes page metadata.
     */
    @PostConstruct
    protected void init() {
        if (currentPage == null) {
            return;
        }

        pageUrl = linkManager.get(currentPage).build().getURL();
        pageTitle = currentPage.getTitle();
        pageDescription = currentPage.getDescription();
        shareImage = currentPage.getProperties().get("og:image", String.class);
    }

    /**
     * {@inheritDoc}
     */
    @Override
    public List<String> getSocialNetworks() {
        return socialNetworks != null ? socialNetworks : Collections.emptyList();
    }

    /**
     * {@inheritDoc}
     */
    @Override
    public String getPageUrl() {
        return pageUrl;
    }

    /**
     * {@inheritDoc}
     */
    @Override
    public String getPageTitle() {
        return pageTitle;
    }

    /**
     * {@inheritDoc}
     */
    @Override
    public String getPageDescription() {
        return pageDescription;
    }

    /**
     * {@inheritDoc}
     */
    @Override
    public String getShareImage() {
        return StringUtils.defaultString(shareImage);
    }

    /**
     * {@inheritDoc}
     */
    @Override
    public String getExportedType() {
        return RESOURCE_TYPE;
    }
}



------------------------

<sly data-sly-use.model="com.aem.play.core.models.SideMenuModel" />

<sly data-sly-test="${model.root}">
    <nav class="side-menu">
        <ul class="side-menu__list">

            <li class="side-menu__item ${model.root.current ? 'is-active' : ''}">
                <a href="${model.root.Link.URL}">
                    ${model.root.title}
                </a>
            </li>

            <sly data-sly-list.child="${model.root.children}">
                <li class="side-menu__item ${child.current ? 'is-active' : ''}">
                    <a href="${child.Link.URL}">
                        ${child.title}
                    </a>
                </li>
            </sly>

        </ul>
    </nav>
</sly>

===================
<sly data-sly-use.model="com.zendesk.core.models.v1.ShareSocialModel"
     data-sly-use.templates="core/wcm/components/commons/v1/templates.html" />

<sly data-sly-test.hasContent="${model.socialNetworks && model.socialNetworks.size > 0}" />

<!-- NO CONTENT -->
<sly data-sly-test="${!hasContent}">
  <sly data-sly-call="${templates.placeholder @ isEmpty=true,
                        classAppend='cmp-socialshare'}" />
</sly>

<!-- CONTENT -->
<sly data-sly-test="${hasContent && model.currentPageItem}">
  <div class="blog-hero__social-share"
       data-page-url="${model.currentPageItem.link.URL}"
       data-page-title="${model.currentPageItem.title}">

    <div class="social-share-horizontal"
         role="list"
         aria-label="Share this article">

      <sly data-sly-list.network="${model.socialNetworks}">
        <button type="button"
                class="social-share__button social-share__button--${network}"
                data-network="${network}"
                aria-label="Share on ${network}">
          <span class="icon" aria-hidden="true"></span>
        </button>
      </sly>

    </div>
  </div>
</sly>


-----------
<sly
        data-sly-resource="${'share-on-social' @
            resourceType='zendesk/components/share-on-social/v1/share-on-social',
            decoration=true}" />

<sly data-sly-test="${wcmmode.edit && (!model.socialNetworks || model.socialNetworks.size == 0)}">
    <div class="cq-placeholder">
        Configure Share Social
    </div>
</sly>
