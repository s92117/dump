package com.aem.play.core.models;

import java.util.List;

import com.adobe.cq.export.json.ComponentExporter;
import com.adobe.cq.wcm.core.components.models.NavigationItem;

/**
 * Share Social model.
 * Exposes social share links as NavigationItem objects.
 */
public interface ShareSocialModel extends ComponentExporter {

    /**
     * Returns the list of social share navigation items.
     *
     * @return list of NavigationItem objects
     */
    List<NavigationItem> getSocialItems();
}



--------------

package com.aem.play.core.models.impl;

import java.net.URLEncoder;
import java.nio.charset.StandardCharsets;
import java.util.ArrayList;
import java.util.Collections;
import java.util.List;

import javax.annotation.PostConstruct;

import com.aem.play.core.models.ShareSocialModel;
import com.adobe.cq.export.json.ComponentExporter;
import com.adobe.cq.export.json.ExporterConstants;
import com.adobe.cq.wcm.core.components.commons.link.Link;
import com.adobe.cq.wcm.core.components.commons.link.LinkManager;
import com.adobe.cq.wcm.core.components.internal.models.v1.NavigationItemImpl;
import com.adobe.cq.wcm.core.components.models.NavigationItem;
import com.day.cq.wcm.api.Page;

import org.apache.sling.api.SlingHttpServletRequest;
import org.apache.sling.models.annotations.DefaultInjectionStrategy;
import org.apache.sling.models.annotations.Exporter;
import org.apache.sling.models.annotations.Model;
import org.apache.sling.models.annotations.injectorspecific.ScriptVariable;
import org.apache.sling.models.annotations.injectorspecific.Self;
import org.apache.sling.models.annotations.injectorspecific.ValueMapValue;

/**
 * Implementation of Share Social component.
 * Builds social share links using NavigationItem objects.
 */
@Model(
        adaptables = SlingHttpServletRequest.class,
        adapters = { ShareSocialModel.class, ComponentExporter.class },
        resourceType = ShareSocialModelImpl.RESOURCE_TYPE,
        defaultInjectionStrategy = DefaultInjectionStrategy.OPTIONAL
)
@Exporter(
        name = ExporterConstants.SLING_MODEL_EXPORTER_NAME,
        extensions = ExporterConstants.SLING_MODEL_EXTENSION
)
public class ShareSocialModelImpl implements ShareSocialModel {

    /**
     * Resource type of the component.
     */
    public static final String RESOURCE_TYPE = "aem-play/components/share-social";

    /**
     * Current page injected by Sling.
     */
    @ScriptVariable
    private Page currentPage;

    /**
     * Link manager for building share URLs.
     */
    @Self
    private LinkManager linkManager;

    /**
     * Configured social networks.
     */
    @ValueMapValue
    private List<String> socialNetworks;

    /**
     * List of social share navigation items.
     */
    private final List<NavigationItem> socialItems = new ArrayList<>();

    /**
     * Initializes the social share navigation items.
     */
    @PostConstruct
    protected void init() {

        if (currentPage == null || socialNetworks == null) {
            return;
        }

        String pageUrl = linkManager.get(currentPage).build().getURL();
        String pageTitle = currentPage.getTitle();

        for (String network : socialNetworks) {

            String shareUrl = buildShareUrl(network, pageUrl, pageTitle);

            Link<Page> link = linkManager.get(shareUrl).build();

            NavigationItemImpl navItem = new NavigationItemImpl(
                    currentPage,
                    link,
                    false,
                    Collections.emptyList()
            );

            socialItems.add(navItem);
        }
    }

    /**
     * Builds the social share URL for the given network.
     *
     * @param network   social network key
     * @param pageUrl   current page URL
     * @param pageTitle current page title
     * @return share URL
     */
    private String buildShareUrl(final String network, final String pageUrl, final String pageTitle) {

        String encodedUrl = URLEncoder.encode(pageUrl, StandardCharsets.UTF_8);
        String encodedTitle = URLEncoder.encode(pageTitle, StandardCharsets.UTF_8);

        switch (network) {
            case "x":
                return "https://twitter.com/intent/tweet?url=" + encodedUrl + "&text=" + encodedTitle;
            case "facebook":
                return "https://www.facebook.com/sharer/sharer.php?u=" + encodedUrl;
            case "linkedin":
                return "https://www.linkedin.com/sharing/share-offsite/?url=" + encodedUrl;
            default:
                return "#";
        }
    }

    /**
     * Returns the list of social share navigation items.
     *
     * @return list of NavigationItem objects
     */
    @Override
    public List<NavigationItem> getSocialItems() {
        return socialItems;
    }

    /**
     * Returns the exported resource type.
     *
     * @return resource type
     */
    @Override
    public String getExportedType() {
        return RESOURCE_TYPE;
    }
}


--------------
<sly data-sly-use.model="com.aem.play.core.models.ShareSocialModel">

<div class="share-social" aria-label="Share this article">
    <sly data-sly-list.item="${model.socialItems}">
        <a
            href="${item.link.URL}"
            target="_blank"
            rel="noopener noreferrer"
            aria-label="Share article">
        </a>
    </sly>
</div>

</sly>



